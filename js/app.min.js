function Products(e){return{getProducts:function(){var r={method:"GET",url:"https://smktesting.herokuapp.com/api/products/"};return e(r).then(function(e){return e.data})}}}function productCtrl(e,r,t){e.loading=!0,r.getProducts().then(function(r){e.products=r,e.loading=!1}),e.getReviews=function(r){t.getReviews(r).then(function(r){e.reviews=r})}}function Reviews(e){return{getReviews:function(r){var t={method:"GET",url:"https://smktesting.herokuapp.com/api/reviews/"+r};return e(t).then(function(e){return e.data})}}}function User(e,r){var t;return(t=r.getObject("user"))&&(e.defaults.headers.common.Authorization="Token "+t.token),{getUser:function(){return t},register:function(r,t){var o={method:"POST",url:"https://smktesting.herokuapp.com/api/register/",data:{username:r,password:t}};return e(o).then(function(e){return e.data})},login:function(o,n){var u={method:"POST",url:"https://smktesting.herokuapp.com/api/login/",data:{username:o,password:n}};return e(u).then(function(n){if(n.data.success){t={username:o,token:n.data.token},e.defaults.headers.common.Authorization="Token "+t.token;var u=new Date;u.setDate(u.getDate()+1),r.putObject("user",t,{expires:u})}return n.data})},logout:function(){r.remove("user"),e.defaults.headers.common.Authorization=void 0,t=void 0}}}function userService(){return{reset:function(e){return void(e&&(e.$setPristine(),e.$setUntouched()))}}}function authCtrl(e,r){e.$watch(r.getUser,function(r){e.user=r}),e.logout=function(){r.logout()}}function loginCtrl(e,r,t){e.login=function(o){var n=e.user.username,u=e.user.password;n&&u&&r.login(n,u).then(function(r){r.success?$.fancybox.close():e.errorMessage=r.message,e.user=t.reset(o)})},e.onInput=function(){e.errorMessage=!1}}function registerCtrl(e,r,t){e.register=function(o){var n=e.user.username,u=e.user.password;n&&u&&r.register(n,u).then(function(r){r.success?($.fancybox.close(),$.fancybox.open({src:"#regSuccess"},{touch:!1,keyboard:!1,focus:!1})):e.errorMessage=r.message,e.user=t.reset(o)})},e.onInput=function(){e.errorMessage=!1}}angular.module("product",[]),Products.$inject=["$http"],angular.module("product").factory("Products",Products),productCtrl.$inject=["$scope","Products","Reviews"],angular.module("product").controller("productCtrl",productCtrl),Reviews.$inject=["$http"],angular.module("product").service("Reviews",Reviews),angular.module("user",["ngCookies"]),User.$inject=["$http","$cookies"],angular.module("user").factory("User",User),angular.module("user").factory("userService",userService),authCtrl.$inject=["$scope","User"],angular.module("user").controller("authCtrl",authCtrl),loginCtrl.$inject=["$scope","User","userService"],angular.module("user").controller("loginCtrl",loginCtrl),registerCtrl.$inject=["$scope","User","userService"],angular.module("user").controller("registerCtrl",registerCtrl),angular.module("root",["user","product"]),$(function(){$("body").on("click",".fancybox",function(){var e=$(this);$.fancybox.close(),$.fancybox.open({src:e.data("src")},{touch:!1,keyboard:!1,focus:!1})})});