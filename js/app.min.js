function Products(e){return{getProducts:function(){var t={method:"GET",url:"https://smktesting.herokuapp.com/api/products/"};return e(t).then(function(e){return e.data})}}}function productCtrl(e,t,r){e.loading=!0,t.getProducts().then(function(t){e.products=t,e.loading=!1}),e.getReviews=function(t){r.getReviews(t).then(function(t){e.reviews=t})}}function Reviews(e){return{getReviews:function(t){var r={method:"GET",url:"https://smktesting.herokuapp.com/api/reviews/"+t};return e(r).then(function(e){return e.data})}}}function User(e,t){var r;return(r=t.getObject("user"))&&(e.defaults.headers.common.Authorization="Token "+r.token),{getUser:function(){return r},register:function(t,r){var o={method:"POST",url:"https://smktesting.herokuapp.com/api/register/",data:{username:t,password:r}};return e(o).then(function(e){return e.data})},login:function(o,n){var u={method:"POST",url:"https://smktesting.herokuapp.com/api/login/",data:{username:o,password:n}};return e(u).then(function(n){if(n.data.success){r={username:o,token:n.data.token},e.defaults.headers.common.Authorization="Token "+r.token;var u=new Date;u.setDate(u.getDate()+1),t.putObject("user",r,{expires:u})}return n.data})},logout:function(){t.remove("user"),e.defaults.headers.common.Authorization=void 0,r=void 0}}}function userService(){return{reset:function(e){return void(e&&(e.$setPristine(),e.$setUntouched()))}}}function authCtrl(e,t){e.$watch(t.getUser,function(t){e.user=t}),e.logout=function(){t.logout()}}function loginCtrl(e,t,r){e.login=function(o){var n=e.user.username,u=e.user.password;n&&u&&t.login(n,u).then(function(t){t.success?$.fancybox.close():e.errorMessage=t.message,e.user=r.reset(o)})},e.onInput=function(){e.errorMessage=!1}}function registerCtrl(e,t,r){e.register=function(o){var n=e.user.username,u=e.user.password;n&&u&&t.register(n,u).then(function(t){t.success?($.fancybox.close(),$.fancybox.open({src:"#regSuccess"},{touch:!1,keyboard:!1,focus:!1,onComplete:function(){setTimeout(function(){$.fancybox.close()},3e3)}})):e.errorMessage=t.message,e.user=r.reset(o)})},e.onInput=function(){e.errorMessage=!1}}angular.module("product",[]),Products.$inject=["$http"],angular.module("product").factory("Products",Products),productCtrl.$inject=["$scope","Products","Reviews"],angular.module("product").controller("productCtrl",productCtrl),Reviews.$inject=["$http"],angular.module("product").service("Reviews",Reviews),angular.module("user",["ngCookies"]),User.$inject=["$http","$cookies"],angular.module("user").factory("User",User),angular.module("user").factory("userService",userService),authCtrl.$inject=["$scope","User"],angular.module("user").controller("authCtrl",authCtrl),loginCtrl.$inject=["$scope","User","userService"],angular.module("user").controller("loginCtrl",loginCtrl),registerCtrl.$inject=["$scope","User","userService"],angular.module("user").controller("registerCtrl",registerCtrl),angular.module("root",["user","product"]),$(function(){$("body").on("click",".fancybox",function(){var e=$(this);$.fancybox.open({src:e.data("src")},{touch:!1,keyboard:!1,focus:!1})})});